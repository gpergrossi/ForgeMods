package dev.mortus.cells;

import dev.mortus.util.math.geom.Polygon;

public class Cell {

	boolean loaded;
	long seed;
	Polygon poly;
	
	int numNeighbors;
	Cell[] neighbors;
	
	Cell(long seed) {
		this.seed = seed;
	}
	
	void setPolygon(Polygon poly) {
		this.poly = poly;
	}
	
	void internalAddNeighbor(Cell c) {
		if (neighbors == null)
		for (int i = 0; i < numNeighbors; i++) {
			if (neighbors[i] == c) return;
		}
		neighbors[numNeighbors] = c;
		numNeighbors++;
	}
	
	void addNeighbor(Cell c) {
		this.internalAddNeighbor(c);
		c.internalAddNeighbor(this);
	}
	
	void removeNeighbor(Cell c) {
		if (neighbors == null) return;
		for (int i = 0; i < numNeighbors; i++) {
			if (neighbors[i] == c) {
				neighbors[numNeighbors-1] = null;
				neighbors[i] = neighbors[numNeighbors-1];
				numNeighbors--;
				return;
			}
		}
		return;
	}
	
	void setLoaded() {
		loaded = true;
	}
	
	void delete() {
		for (int i = 0; i < numNeighbors; i++) {
			neighbors[i].removeNeighbor(this);
		}
		
		poly = null;
		neighbors = null;
		loaded = false;
	}
	
}
